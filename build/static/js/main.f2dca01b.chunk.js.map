{"version":3,"sources":["components/LoadingSpinner.js","pages/Home.js","App.js","context/UserContext.js","index.js"],"names":["LoadingSpinner","className","baseURL","productData","product_id","product_name","product_type","product_sku","product_price","short_description","long_description","info_description","tech_specs","defaultImage","images","thumbnails","datasheet_benefits","datasheet_features","device_compatibility","package_content","warranty","certifications","rating","upc_code","unit_height","unit_width","unit_depth","unit_weight","height","width","depth","weight","contact_name","contact_dep","contact_phone","contact_email","footer_company","footer_address","footer_email","footer_phone","footer_fax","footer_site","console","log","App","props","downloadPdf","setState","loading","axios","post","then","get","responseType","res","pdfBlob","Blob","data","type","saveAs","fetchData","searchParams","URL","window","location","splitProductDescription","desc","html","array","split","DOMParser","parseFromString","body","textContent","regexValid","RegExp","e","replace","stripLinks","handleData","product","site","entityId","name","customFields","edges","forEach","field","node","value","fields","getUpcCode","getUnitDimensions","findCertifications","findRating","sku","prices","price","description","image","index","img320px","generateThumbnails","benefits","item","findBenefits","features","productLine","axtionSeries","featureList","icons","domain","iconsrc","spaceToDash","url","toLowerCase","push","findFeatureIcons","findFeatures","findPackageContent","findDeviceCompatibility","params","store_url","id","token","Object","keys","key","Error","storeUrl","graphQLUrl","origin","graphQLQuery","fetch","method","credentials","mode","headers","Authorization","Accept","JSON","stringify","query","json","getProductAndSiteInfo","document","getElementById","innerHTML","footer","length","unit","renderProduct","renderPage","catch","componentDidMount","state","this","src","alt","onClick","Component","path","exact","component","Home","UserContext","createContext","children","useState","user","setUser","Provider","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.f2dca01b.chunk.js","sourcesContent":["import React from 'react';\nimport './Loadingspinner.css';\n\nconst LoadingSpinner = () => {\n    return (\n        <div className=\"sk-circle\">\n            <div className=\"sk-circle1 sk-child\"></div>\n            <div className=\"sk-circle2 sk-child\"></div>\n            <div className=\"sk-circle3 sk-child\"></div>\n            <div className=\"sk-circle4 sk-child\"></div>\n            <div className=\"sk-circle5 sk-child\"></div>\n            <div className=\"sk-circle6 sk-child\"></div>\n            <div className=\"sk-circle7 sk-child\"></div>\n            <div className=\"sk-circle8 sk-child\"></div>\n            <div className=\"sk-circle9 sk-child\"></div>\n            <div className=\"sk-circle10 sk-child\"></div>\n            <div className=\"sk-circle11 sk-child\"></div>\n            <div className=\"sk-circle12 sk-child\"></div>\n        </div>\n    )\n}\n\nexport default LoadingSpinner","import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { saveAs } from \"file-saver\";\nimport LoadingSpinner from \"../components/LoadingSpinner\";\nimport \"../App.css\";\nimport \"../components/Datasheet.css\";\n\nconst baseURL =\n  process.env.NODE_ENV === \"production\"\n    ? \"https://datasheet-backendtjf.herokuapp.com\"\n    : \"http://localhost:3001\";\n\nlet productData = {\n  product_id: 0,\n  product_name: \"\",\n  product_type: \"\",\n  product_sku: \"\",\n  product_price: \"\",\n  short_description: \"\",\n  long_description: \"\",\n  info_description: \"\",\n  tech_specs: \"\",\n  defaultImage: [],\n  images: [],\n  thumbnails: \"\",\n  datasheet_benefits: \"\",\n  datasheet_features: \"\",\n  device_compatibility: \"\",\n  package_content: \"\",\n  warranty: \"\",\n  certifications: \"\",\n  rating: \"\",\n  upc_code: \"\",\n  unit_height: \"\",\n  unit_width: \"\",\n  unit_depth: \"\",\n  unit_weight: \"\",\n  height: {},\n  width: {},\n  depth: {},\n  weight: {},\n  contact_name: \"The Joy Factory\",\n  contact_dep: \"Sales Team\",\n  contact_phone: \"949.382.1552\",\n  contact_email: \"sales@thejoyfactory.com\",\n  footer_company: \"The Joy Factory Inc.\",\n  footer_address: \"16811 Hale Ave Bldg D, Irvine, CA 92606\",\n  footer_email: \"sales@thejoyfactory.com\",\n  footer_phone: \"949.216.8869\",\n  footer_fax: \"949.216.8869\",\n  footer_site: \"www.thejoyfactory.com\",\n};\n\nconsole.log(productData);\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: 0,\n      loading: false,\n    };\n  }\n\n  // Use Componenet state data to handle PDF Download\n  // createAndDownloadPdf = () => {\n  //   axios\n  //     .post(`${baseURL}/create-pdf`, this.state)\n  //     .then(({ data }) => {\n  //       console.log(\"PDF BUFFER\", data);\n  //       axios.get(`${baseURL}/fetch-pdf`, { responseType: \"blob\" });\n  //     })\n  //     .then((res) => {\n  //       const pdfBlob = new Blob([res.data], { type: \"application/pdf\" });\n  //       saveAs(pdfBlob, \"datasheet-tjf.pdf\");\n  //     });\n  // };\n\n  // Currently being used to handle PDF Download\n  downloadPdf = () => {\n    this.setState({ loading: true });\n\n    axios\n      .post(`${baseURL}/download-pdf`, productData)\n      .then(() => axios.get(`${baseURL}/fetch-pdf`, { responseType: \"blob\" }))\n      .then((res) => {\n        console.log(res);\n        const pdfBlob = new Blob([res.data], { type: \"application/pdf\" });\n        saveAs(pdfBlob, `datasheet-${productData.product_sku}.pdf`);\n        this.setState({ loading: false });\n      });\n  };\n\n  // downloadPdf = () => {\n  //   fetch(\"/download-pdf\", {\n  //     method: \"POST\",\n  //     body: JSON.stringify(productData),\n  //   }).then((res) => {\n  //     res.arrayBuffer().then((res) => {\n  //       console.log(res);\n  //       const pdfBlob = new Blob([res], { type: \"application/pdf\" });\n  //       saveAs(pdfBlob, \"datasheet.pdf\");\n  //     });\n  //   });\n  // }\n\n  fetchData = () => {\n    console.log(\"FetchData started...\");\n    const pageUrl = new URL(window.location);\n    const searchParams = pageUrl.searchParams;\n    console.log(`Search Params: ${searchParams}`);\n\n    /*\n        Utility functions for rendering\n    */\n\n    // Based on the browser locale, provide a localized price\n    function formatLocalizedPrice(price) {\n      return new Intl.NumberFormat(navigator.language, {\n        style: \"currency\",\n        currency: price.currencyCode,\n      }).format(price.value);\n    }\n\n    // Create a srcset string for responsive images\n    function renderSrcset(image) {\n      return `${image.img320px} 320w, ${image.img640px} 640w, ${image.img960px} 960w, ${image.img1280px} 1280w`;\n    }\n\n    // Function to strip HTML from product descriptions, leaving just the text\n    function stripHtml(html) {\n      var doc = new DOMParser().parseFromString(html, \"text/html\");\n      return doc.body.textContent || \"\";\n    }\n\n    // Function to strip link tags from product descriptions\n    function stripLinks(desc) {\n      let cleanDesc = \"\";\n      let regexValid = false;\n      try {\n        // Check if there are links in the Tech Specs Description\n        new RegExp(/<a.*?>[^<]*<\\/a>/);\n        regexValid = true;\n      } catch (e) {\n        regexValid = false;\n      }\n      // If a link is found, also remove the double BR tags\n      if (regexValid) {\n        let removedFirstBR = desc.replace(/<br><br>/, \"\");\n        cleanDesc = removedFirstBR.replace(/<a.*?>[^<]*<\\/a>/g, \"\");\n        return cleanDesc;\n      } else {\n        return desc;\n      }\n    }\n\n    function findProductType(fields) {\n      fields.forEach((field) => {\n        if (field.node.name === \"product_type\") {\n          productData.product_type = field.node.value;\n        }\n      });\n    }\n\n    function findDeviceCompatibility(fields) {\n      fields.forEach((field) => {\n        if (field.node.name === \"device_compatibility\") {\n          let device_compatibility = field.node.value;\n          productData.device_compatibility = device_compatibility.replace(\n            \",\",\n            \",\"\n          );\n        }\n      });\n    }\n\n    function findCertifications(fields) {\n      fields.forEach((field) => {\n        if (field.node.name === \"certifications\") {\n          let certifications = field.node.value;\n             productData.certifications = certifications.replace(\"C3D2,\", \"C3D2   \");\n        \n        }\n      });\n    }\n\n    function findRating(fields) {\n      fields.forEach((field) => {\n        if (field.node.name === \"rating\") {\n          let rating = field.node.value;\n         \n          productData.rating = rating.replace(\",\", \" | \");\n        }\n      });\n    }\n\n    function findPackageContent(fields) {\n      fields.forEach((field) => {\n        if (field.node.name === \"package_content\") {\n          productData.package_content = field.node.value;\n        }\n      });\n    }\n\n    function splitProductDescription(desc) {\n      var array = desc.split(\"&lt;!-- split --&gt;\");\n      productData.short_description = stripHtml(array[0]);\n      productData.long_description = array[1];\n      productData.info_description = array[2];\n      productData.tech_specs = stripLinks(array[3]);\n    }\n\n    function generateThumbnails(images) {\n      let thumbnails = \"\";\n      images.forEach((image, index) => {\n        if (index !== 0 && index < 4)\n          thumbnails += `<img class=\"thumbnail\" src=\"${image.node.img320px}\">`;\n      });\n      productData.thumbnails = thumbnails;\n    }\n\n    function findBenefits(fields) {\n      var benefits;\n      fields.forEach((field) => {\n        if (field.node.name === \"datasheet_benefits\") {\n          benefits = field.node.value;\n        }\n      });\n      var array = benefits.split(\",\");\n      array.forEach((item, index) => {\n        if (index % 3 === 0) {\n          productData.datasheet_benefits += `<tr>`;\n        }\n        productData.datasheet_benefits += `<td><li>${item}</li></td>`;\n        if (index === 2 || index === 5) {\n          productData.datasheet_benefits += `</tr>`;\n        }\n      });\n    }\n\n    function findFeatures(fields) {\n      let features;\n      let productLine;\n      let axtionSeries;\n      fields.forEach((field) => {\n        if (field.node.name === \"datasheet_features\") {\n          features = field.node.value;\n        }\n      });\n      fields.forEach((field) => {\n        if (field.node.name === \"product_line\") {\n          productLine = field.node.value;\n        }\n      });\n      fields.forEach((field) => {\n        if (field.node.name === \"axtion_series\") {\n          axtionSeries = field.node.value;\n        }\n      });\n      let featureList = features.split(\",\");\n      let icons = findFeatureIcons(featureList, productLine, axtionSeries);\n      featureList.forEach((item, index) => {\n        if (index % 3 === 0) {\n          productData.datasheet_features += `<tr>`;\n        }\n        productData.datasheet_features += `<td><li class=\"feature-item\"><img class=\"feature-icon\" src=\"${icons[index]}\">${item}</li></td>`;\n        if (index === 2 || index === 5) {\n          productData.datasheet_features += `</tr>`;\n        }\n      });\n    }\n\n    function findFeatureIcons(features, productLine, axtionSeries) {\n      let domain = \"https://thejoyfactory.com/content/datasheet/icons/\";\n      let iconsrc = [];\n\n      features.forEach((item, index) => {\n        let spaceToDash = item.replace(/ /g, \"-\");\n        let icon = \"\";\n\n        if (axtionSeries != null) {\n          icon = `${domain}${productLine}-${axtionSeries}-${spaceToDash}.png`;\n        } else {\n          icon = `${domain}${productLine}-${spaceToDash}.png`;\n        }\n\n        let url = icon.toLowerCase();\n        iconsrc.push(url);\n      });\n      return iconsrc;\n    }\n\n    function getUpcCode(fields) {\n      fields.forEach((field) => {\n        if (field.node.name === \"upc_code\") {\n          productData.upc_code = field.node.value;\n        }\n      });\n    }\n\n    function getUnitDimensions(fields) {\n      fields.forEach((field) => {\n        // Get unit height\n        if (field.node.name === \"unit_height\") {\n          productData.unit_height = field.node.value;\n        }\n        // Get unit width\n        else if (field.node.name === \"unit_width\") {\n          productData.unit_width = field.node.value;\n        }\n        // Get unit depth\n        else if (field.node.name === \"unit_depth\") {\n          productData.unit_depth = field.node.value;\n        }\n        // Get unit weight\n        else if (field.node.name === \"unit_weight\") {\n          productData.unit_weight = field.node.value;\n        }\n      });\n    }\n\n    // Assign data values into state\n    function handleData(data) {\n      const product = data.site.product;\n      console.log(\"Assigning new values to state...\");\n      productData.product_id = product.entityId;\n      productData.product_name = product.name;\n      findProductType(product.customFields.edges);\n      getUpcCode(product.customFields.edges);\n      getUnitDimensions(product.customFields.edges);\n      findCertifications(product.customFields.edges);\n      findRating(product.customFields.edges);\n      productData.product_sku = product.sku;\n      productData.product_price = product.prices.price.value;\n      splitProductDescription(product.description);\n      productData.defaultImage = product.defaultImage;\n      productData.images = product.images.edges;\n      generateThumbnails(product.images.edges);\n      findBenefits(product.customFields.edges);\n      findFeatures(product.customFields.edges);\n      productData.warranty = product.warranty;\n      productData.depth = product.depth;\n      productData.height = product.height;\n      productData.weight = product.weight;\n      productData.width = product.width;\n      findPackageContent(product.customFields.edges);\n      findDeviceCompatibility(product.customFields.edges);\n    }\n\n    /*\n        Page rendering logic\n    */\n    function renderPage(data) {\n      // Render the HTML for the product\n      console.log(data);\n\n      const product = data.site.product;\n      console.log(product);\n\n      handleData(data);\n\n      document.getElementById(\"product\").innerHTML = renderProduct(productData);\n    }\n\n    function renderProduct(product) {\n      // Footer\n      const footer = `\n          <table class=\"footer text-left\">\n            <tr>\n                <td style=\"width:73%;\">\n                  <table>\n                  <tr>\n                    <td class=\"footer-company\" style=\"width:73%;\">The Joy Factory Inc.</td>\n                  </tr>\n                  <tr>\n                    <td class=\"footer-second-desc\">${product.footer_address} <span style=\"color: #d0103a;\">|</span> ${product.footer_email} <span style=\"color: #d0103a;\">|</span> T : ${product.footer_phone} <span style=\"color: #d0103a;\">|</span> F : ${product.footer_fax} <span style=\"color: #d0103a;\">|</span> ${product.footer_site}</td>\n                  </tr>\n                  </table>     \n                </td>\n                <td style=\"width:16.5%;\">\n                  <table class=\"footer-icons\" style=\"width:100%;\">\n                    <tr>\n                      <td class=\"footer-image\"><img src=\"https://thejoyfactory.com/content/datasheet/protect.jpg\" alt=\"The Joy Factory Protect Icon\"></td>\n                      <td class=\"footer-image\"><img src=\"https://thejoyfactory.com/content/datasheet/secure.jpg\" alt=\"The Joy Factory Secure Icon\"></td>\n                      <td class=\"footer-image\"><img src=\"https://thejoyfactory.com/content/datasheet/position.jpg\" alt=\"The Joy Factory Position Icon\"></td>\n                    </tr>\n                    <tr>\n                      <td class=\"footer-image-content\">Protect</td>\n                      <td class=\"footer-image-content\">Secure</td>\n                      <td class=\"footer-image-content\">Position</td>\n                    </tr>\n                  </table>\n                </td>\n                <td align=\"center\" style=\"width:10.5%;\">\n                  <img src=\"https://thejoyfactory.com/content/datasheet/logo.png\" alt=\"The Joy Factory logo.\" style=\"width:100px;\">\n                </td>\n            </tr>\n          </table>\n          `;\n\n      // Contact Section - currently not used on customer preview\n      const contact = `\n          <div class=\"contact-table\" style=\"margin: 10px 0 300px 0; padding: 10px;\">\n            <table class=\"contact\" style=\"background: white; width: 100%;\">\n              <tr>\n                <td class=\"text-center\" style=\"padding: 5px 30px; width: 25%;\">\n                  <img src=\"https://thejoyfactory.com/content/datasheet/logo-lg.png\" alt=\"The Joy Factory logo.\" style=\"width:100px;\">\n                </td>\n                <td class=\"text-left\" style=\"padding: 5px 30px; width: 25%;\">\n                  <p style=\"font-size: 1.25rem; font-weight: bold;\">${product.contact_name}</p>\n                  <p style=\"font-size: 0.9rem; font-weight: bold;\">${product.contact_dep}</p>\n                </td>\n                <td class=\"text-left\" style=\"border-left:solid 2px red; padding: 5px 30px; width: 50%;\">\n                  <p>Direct Phone Number | ${product.contact_phone}</p>\n                  <p>Email Address | ${product.contact_email}</p>\n                </td>\n              </tr>\n            </table>\n          </div>\n        `;\n\n      // Render the product into a preview\n      return `\n          <!-- Start: Page One -->\n          <div class=\"page\" id=\"page-one\">\n            <table class=\"text-left\">\n              <tr>\n                <td class=\"product-header\">\n                  <h1 class=\"product-name\">${product.product_name}</h1>\n                  <p class=\"product-short-desc\">${product.short_description}</p>\n                  <hr class=\"hr-short hr-left\">\n                  <div class=\"product-sku-price\">\n                    <p class=\"product-sku\">SKU: ${product.product_sku}</p>\n                    <p class=\"product-price\">MSRP: $${product.product_price}</p>\n                  </div>\n                </td>\n              </tr>\n            </table>\n            <table class=\"product-desc-container\">\n              <tr>\n                <td class=\"product-description\">\n                  ${product.long_description}\n                  ${product.info_description}\n                </td>\n                <td class=\"product-images\">\n                  ${\n                    product.defaultImage\n                      ? `<img class=\"default-image\" src=\"${product.defaultImage.img320px}\" alt=\"The Joy Factory product image\">`\n                      : \"\"\n                  }\n                  <p>\n                    ${product.thumbnails}\n                  </p>\n                </td>\n              </tr>\n            </table>\n            <div class=\"benefits\">\n               <span class=\"benefits-header\">Benefits</span>\n               <br>\n               <table>\n                  ${product.datasheet_benefits}\n               </table>\n            </div>\n            <div class=\"features\">\n               <span class=\"features-header\">Features</span>\n               <br>\n               <table>\n                  ${product.datasheet_features}\n               </table>\n            </div>\n            ${footer}\n          </div>\n          <!-- End: Page One -->\n\n          <!-- Start: Page Two -->\n          <div class=\"page\" id=\"page-two\">\n            <div class=\"tech-specs-header\">\n              <p>\n                Technical Specifications\n                <br>\n                <span class=\"underline\"></span>\n              </p>\n            </div>\n            <table class=\"tech-specs-container\">\n              <tr>\n                <td class=\"tech-specs-image-container\" style=\"padding: 0 25px;\">\n                  ${\n                    product.images[product.images.length - 1]\n                      ? `<img class=\"tech-spec-image\" src=\"${\n                          product.images[product.images.length - 1].node\n                            .img320px\n                        }\" alt=\"The Joy Factory product image\">`\n                      : \"\"\n                  }\n                  <p class=\"disclaimer\" style=\"font-size: 7px;\">The information on this data sheet is subject to change at any time at the discretion of The Joy Factory</p>\n                </td>\n                <td class=\"tech-specs\">\n                  ${product.tech_specs}\n                </td>\n              </tr>\n            </table>\n            <div class=\"product-specifications\">\n              <table class=\"product-specs-table\">\n                <tr>\n                  <td class=\"product-info-container\">\n                    <div class=\"product-name text-left\">\n                      ${product.product_name}\n                    </div>\n                    <table class=\"product-info-inner-table\">\n                      <tr>\n                        <div class=\"product-info-group\">\n                          <p>SKU: ${product.product_sku}</p>\n                          <p>Product type: ${product.product_type}</p>\n                          <p>MSRP: $${product.product_price}</p>\n                        </div>\n                      </tr>\n                    </table>\n                  </td>\n                  <td class=\"product-specs-container\">\n                    <table class=\"product-specs-inner-table\">\n                      <th class=\"product-specs-title\">Product Specifications</th>\n                      <tr>\n                        <td>Compatible with: ${\n                          product.device_compatibility\n                        }</td>\n                      </tr>\n                      <tr>\n                        <td>Product height: ${product.unit_height} in</td>\n                      </tr>\n                      <tr>\n                        <td>Product width: ${product.unit_width} in</td>\n                      </tr>\n                      <tr>\n                        <td>Product thickness: ${product.unit_depth} in</td>\n                      </tr>\n                      <tr>\n                        <td>Product weight: ${product.unit_weight} lb</td>\n                      </tr>\n                      <tr>\n                        <td>Package height: ${product.height.value} ${\n        product.height.unit\n      }</td>\n                      </tr>\n                      <tr>\n                        <td>Package width: ${product.width.value} ${\n        product.width.unit\n      }</td>\n                      </tr>\n                      <tr>\n                        <td>Package depth: ${product.depth.value} ${\n        product.depth.unit\n      }</td>\n                      </tr>\n                      <tr>\n                        <td>Package weight: ${product.weight.value} ${\n        product.weight.unit\n      }</td>\n                      </tr>\n                      <tr>\n                        <td>UPC: ${product.upc_code}</td>\n                      </tr>\n                      <tr>\n                        <td>Warranty: ${product.warranty}</td>\n                      </tr>\n                      <tr>\n                        <td>Certifications: ${product.certifications}</td>\n                      </tr>\n                      <tr>\n                        <td>Rating: ${product.rating}</td>\n                      </tr>\n                      <tr>\n                        <td>Package content: ${product.package_content}</td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n              </table>\n            </div>\n            ${footer}\n          </div>\n          <!-- End: Page Two -->\n        `;\n    }\n\n    function renderPrice(prices) {\n      // Render the price component from the supplied prices\n      return `<span></span>`;\n    }\n\n    /*\n        API fetching\n    */\n    function getProductAndSiteInfo(params) {\n      const storeUrl = new URL(params.store_url);\n\n      // Use the store's canonical URL which should always resolve\n      const graphQLUrl = `${storeUrl.origin}/graphql`;\n\n      // Set up GraphQL query\n      // If specific product IDs were supplied, fetch them, else just get the first few products\n      const graphQLQuery = `\n        query SingleProduct {\n          site {\n             product(entityId: ${params.id}) {\n              entityId\n              brand {\n                name\n              }\n              name\n              sku\n              path\n              description\n              height {\n                value\n                unit\n              }\n              width {\n                value\n                unit\n              }\n              weight {\n                value\n                unit\n              }\n              depth {\n                value\n                unit\n              }\n              warranty\n              customFields {\n                edges {\n                  node {\n                    name\n                    value\n                  }\n                }\n              }\n              defaultImage {\n                img320px: url(width: 320)\n                img640px: url(width: 640)\n                img960px: url(width: 960)\n              }\n              images {\n                edges {\n                  node {\n                    img320px:url(width:320)\n                  }\n                }\n              }\n              prices {\n                price {\n                  ...PriceFields\n                }\n              }\n            }\n          }\n        }\n          \n        fragment PriceFields on Money {\n          value\n          currencyCode\n        }`;\n\n      // Fetch data from the GraphQL Storefront API\n      return fetch(graphQLUrl, {\n        method: \"POST\",\n        credentials: \"include\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${params.token}`,\n        },\n        Accept: \"application/json\",\n        body: JSON.stringify({ query: graphQLQuery }),\n      })\n        .then((res) => res.json())\n        .then((res) => res.data);\n    }\n\n    // Set up default params (token expires 1/15/2038)hh\n    let params = {\n      store_url: \"https://thejoyfactory.com\",\n      id: null,\n      token:\n        \"eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NiJ9.eyJjaWQiOjEsImNvcnMiOlsiaHR0cHM6Ly9kYXRhc2hlZXQtZnJvbnRlbmR0amYtdjEubmV0bGlmeS5hcHAiXSwiZWF0IjoyMTQ2MDAyNTc4LCJpYXQiOjE2NTE3NzMxMTEsImlzcyI6IkJDIiwic2lkIjoxMDAwNjc2MjQwLCJzdWIiOiJxc3M0dWxrNmdlNjI1NHJtaXZhZTdqYmh2NnhsMGp4Iiwic3ViX3R5cGUiOjIsInRva2VuX3R5cGUiOjF9.V2H0x1GY8R0D1gDzfBoL5Ad0fZ0KeiIPKeUzhhENE1VB8pNzGR06GDg5OdZLxhVHfvP8ukhQVCX4GbbUXyklaw\",\n    };\n\n    // Fill in supplied URL params\n    Object.keys(params).forEach(function (key) {\n      if (searchParams.get(key)) {\n        params[key] = searchParams.get(key);\n      }\n    });\n    console.log(params.id);\n    // Use testdata.json file as testData\n    // renderPage(testData);\n\n    // Check for required parameters, throw an error if they're not found\n    if (!(params.store_url && params.token)) {\n      throw new Error(\n        \"At least one of the required URL parameters (Store URL, Token) was not supplied or was invalid\"\n      );\n    } else {\n      // It seems like the required parameters were supplied, try to load the product data from the Storefront API\n      getProductAndSiteInfo(params)\n        .then((data) => {\n          // With our data loaded, render the product listing\n\n          renderPage(data);\n        })\n        .catch((e) => {\n          // Some error was encountered\n          console.log(`Error: failed to fetch product data.`);\n          throw e;\n        });\n    }\n  };\n\n  componentDidMount = () => {\n    this.fetchData();\n  };\n\n  render() {\n    const loading = this.state.loading;\n\n    return (\n      <div className=\"App container my-5\">\n        <div className=\"LoadingSpinner-wrapper\">\n          <img\n            className=\"download-icon\"\n            src=\"https://thejoyfactory.com/content/datasheet/icons/data-sheet-icon-01.png\"\n            alt=\"icon\"\n          />\n          <button className=\"btn btn-primary\" onClick={this.downloadPdf}>\n            Download PDF\n          </button>\n          {loading ? <LoadingSpinner /> : \"\"}\n        </div>\n        <div className=\"py-5\" id=\"intro\">\n          <h1>Datasheet Preview</h1>\n        </div>\n        <div id=\"product\"></div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport {BrowserRouter, Switch, Route} from 'react-router-dom';\n\nimport Home from './pages/Home';\nimport './App.css';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <BrowserRouter>\n        <Switch>\n          <Route path=\"/\" exact component={Home} />\n        </Switch>\n      </BrowserRouter>\n    </div>\n  )\n}\n\nexport default App;\n","import React, {createContext, useState} from 'react';\n\nexport const UserContext = createContext(null);\n\nexport default ({children}) => {\n    const [user, setUser] = useState(null);\n\n    return (\n        <UserContext.Provider value={{user, setUser}}>\n            {children}\n        </UserContext.Provider>\n    )\n}","import React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport UserContextProvider from './context/UserContext';\n\nReactDOM.render(\n  <React.StrictMode>\n    <UserContextProvider>\n      <App />\n    </UserContextProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}